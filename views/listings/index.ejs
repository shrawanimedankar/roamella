<% layout("/layout/boilerplate") %>
<div class="d-flex justify-content-end">
  <div class="tax-toggle ">
    <div class="form-check-reverse form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
      <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
    </div>
  </div>
</div>
  <h6>Browse by property type</h6>
  <div class="filters-wrapper">
    <button id="leftBtn" class="scroll-btn left" onclick="scrollFilters(-200)">&#10094;</button>
    <div id="filters" class="d-flex">
      <div class="filter-card">
        <a href="/listings/category/Apartments">
          <img src="/images/Apartments.jpg" alt="Apartment" class="filter-img">
          <p>Apartments</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Hotels">
          <img src="/images/Hotels.jpg" alt="Hotel" class="filter-img">
          <p>Hotels</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Resorts">
          <img src="/images/Resorts.jpg" alt="Resort" class="filter-img">
          <p>Resorts</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Villas">
          <img src="/images/Villas.jpg" alt="Villa" class="filter-img">
          <p>Villas</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/GlampingSites">
          <img src="/images/GlampingSites.jpg" alt="Glamping Site" class="filter-img">
          <p>Glamping Sites</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Rooms">
          <img src="/images/Rooms.jpg" alt="Room" class="filter-img">
          <p>Rooms</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Cabins">
          <img src="/images/Cabins.jpg" alt="Cabin" class="filter-img">
          <p>Cabins</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/GuestRooms">
          <img src="/images/GuestRooms.jpg" alt="Guest Room" class="filter-img">
          <p>Guest Rooms</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Hostels">
          <img src="/images/Hostels.jpg" alt="Hostel" class="filter-img">
          <p>Hostels</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/FarmStays">
          <img src="/images/FarmStays.jpg" alt="Farm Stay" class="filter-img">
          <p>Farm Stays</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/HouseBoats">
          <img src="/images/HouseBoats.jpg" alt="House Boat" class="filter-img">
          <p>House Boats</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Cottages">
          <img src="/images/Cottages.jpg" alt="Cottage" class="filter-img">
          <p>Cottages</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/TreeHouses">
          <img src="/images/TreeHouses.jpg" alt="TreeHouse" class="filter-img">
          <p>Tree Houses</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Ryokans">
          <img src="/images/Ryokans.jpg" alt="Ryokan" class="filter-img">
          <p>Ryokans</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Artic">
          <img src="/images/Artic.jpg" alt="Artic" class="filter-img">
          <p>Artic</p>
        </a>
      </div>
      <div class="filter-card">
        <a href="/listings/category/Riads">
          <img src="/images/Riads.jpg" alt="Riad" class="filter-img">
          <p>Riads</p>
        </a>
      </div>
    </div>
    <button id="rightBtn" class="scroll-btn right" onclick="scrollFilters(200)">&#10095;</button>
  </div>



  <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-2">

    <% if(noListings) { %>
      <div class="alert alert-info text-center w-100">
        Nothing available in "<%= category %>"
      </div>
      <% } else { %>

        <% for(let listing of allListings) { %>
          <a href="/listings/<%= listing._id%>" class="listing_link">
            <div class="card col listing-card">
              <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image" style="height: 15rem" />
              <div class="card-img-overlay"></div>
              <div class="card-body">
                <p class="card-text">
                  <b> <%= listing.title %> </b> 
                  <br />
                  &#8377; <%= listing.price.toLocaleString("en-IN") %> /night <i class="tax-info">&nbsp; &nbsp; +18% GST</i>
                </p>
              </div>
            </div>
          </a>
        <% } %>
      <% } %>
  </div>

  <script> //For Filter slider
    const filters = document.getElementById("filters");
    const leftBtn = document.getElementById("leftBtn");
    const rightBtn = document.getElementById("rightBtn");

    function scrollFilters(amount) {
      filters.scrollLeft += amount;
    }

    function updateButtons() {
      leftBtn.style.display = filters.scrollLeft > 0 ? "flex" : "none";

      rightBtn.style.display =
        filters.scrollLeft + filters.clientWidth >= filters.scrollWidth - 5 ? "none" : "flex";
    }

    filters.addEventListener("scroll", updateButtons);

// For Tax Toggle Switch
let taxSwitch = document.getElementById("switchCheckDefault")
taxSwitch.addEventListener("click", () => {
  let taxInfo= document.getElementsByClassName("tax-info");
  for(info of taxInfo){
    if (info.style.display != "inline"){
      info.style.display = "inline";
    } else{
      info.style.display = "none";
    }  
  }
});

</script>











